

<script src="https://code.jquery.com/jquery-3.7.0.slim.min.js"></script>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>


<link rel="stylesheet" type="text/css" href="~/css/Firm/商品查詢.css">

<script>
        let order = 1;
    $(function () {

        $('#firmSearchButton').on('click', function () {
            console.log('click')
            console.log(order)
            $.post('/FirmPage/Index', {
                pname: $('.pname').val(),
                pmin: parseInt($('.pmin').val()),
                pmax: parseInt($('.pmax').val()),
                pcategory: $('.pcategory option').filter(':selected').val(),
                groupbuy: $('input:radio:checked').attr("id"),
                soldmin: parseInt($('.soldmin').val()),
                soldmax: parseInt($('.soldmax').val()),
                orderby: order
            })
                .done(function (data) {
                    console.log(data)
                    let data2 = JSON.parse(data)
                    $(data2).each(function(){
                    $('.tbody').append(`
                         <tr>
                                    <td>${this.PUrl}</td>
                                    <td>${this.PName}</td>
                                    <td>${this.PCategory}</td>
                                    <td>${this.PPrice}</td>
                                    <td>${this.PInventory}</td>
    @*<td>@item.OBuynumber</td>*@
                        </tr>

                    `)

                    })

                })

        })
    })

    function getorderby(x){
        console.log(x)
        order = x
        $('#firmSearchButton').trigger("click");
    }
</script>

<body>

    <div id="searchContainer">
        <div id="block" style="border: 1px solid #ccc; box-shadow: 0 0 10px #ddd;">
            <div id="blockcontent">
                <label>商品名稱 &nbsp;</label>
                <input type="search" name="PName" class="pname">
                <label style="padding-left:3%">商品庫存數量 &nbsp;</label>
                <input class="num pmin" type="number" min="0" placeholder="小" name="PInventory"> - <input class="num pmax" type="number" min="0" placeholder="大" name="PInventory[1]">
                <br><br>

                <label>商品類別 &nbsp;</label>
                <select name="PCategory" class="pCategory">
                    <option selected>全部</option>
                    <option>蛋糕</option>
                    <option>餅乾</option>
                    <option>派</option>
                    <option>布丁</option>
                    <option>餐包</option>
                    <option>其他</option>
                </select>

                <label style="padding-left:16%">團購商品</label>
                <input name="gobuy" type="radio" id="yes" value="1" class="groupbuy"><label for="yes">是</label>
                <input name="gobuy" type="radio" id="no" value="2" class="groupbuy"><label for="no">否</label>
                <label style="padding-left:17.5%">商品售出數量 &nbsp;</label>
                <input class="num soldmin" type="number" min="0" placeholder="小" name="OBuynumber[0]"> - <input class="num soldmax" type="number" min="0" placeholder="大" name="OBuynumber[1]">
            </div>
            <br>
            <input type="submit" value="搜尋" id="firmSearchButton">
            <input type="reset" id="firmReset">
        </div>
    </div>

    <br>
    <p style="float:left;">
        @*<button id="all">全部商品</button>*@
    </p>
    <p style="float:right;" id="selectbutton">
        <button id="price" onclick="getorderby(1)">商品價格</button>
        <button id="quantity" onclick="getorderby(2)">庫存數量</button>
    </p>

    <table id="productTable" class="table_change">
        <thead>
            <tr>
                <th>商品圖片</th>
                <th>商品名稱</th>
                <th>商品類別</th>
                <th>商品價格</th>
                <th>庫存數量</th>
                @*<th>售出數量</th>*@
            </tr>
        </thead>
        <tbody class="tbody">
            @if (ViewBag.resultdata != null)
            {
                foreach (var item in ViewBag.resultdata)
                {
                    <tr>
                        @*<td>@item.PUrl</td>*@
                        <td>@item.PName</td>
                        <td>@item.PCategory</td>
                        <td>@item.PPrice</td>
                        <td>@item.PInventory</td>
                        @*<td>@item.OBuynumber</td>*@
                    </tr>
                }
            }
        </tbody>
    </table>


    <br>
    <br>

    <br>
    <br>

    <!-- 團購商品 -->
    @*        <div style="float:left;">
    <button id="all">全部商品</button>
    <button id="buyall">團購商品</button>
    </div>
    <div style="float:right;" id="selectbutton">
    <button id="date">開團日期</button>
    <button id="price">商品價格</button>
    <button id="quantity">庫存數量</button>
    <button id="sales">售出數量</button>
    </div>*@

    @*<table id=""
    class="table_change">
    <thead>
    <tr>
    <th>商品圖片</th>
    <th>商品名稱</th>
    <th>商品類別</th>
    <th>開團日期</th>
    <th>團購價格</th>
    <th>庫存數量</th>
    <th>售出數量</th>
    </tr>
    </thead>
    <tbody>
    <tr>
    <td>
    <img src="https://photo.yannick.com.tw/photo/0101196/1.jpg">
    </td>
    <td>皇家奶茶布丁生乳捲</td>
    <td>蛋糕</td>
    <td class="buydate">2023/7/1 - 2023/7/14</td>
    <td>320元</td>
    <td>80</td>
    <td>150</td>
    </tr>
    </tbody>
    </table>
    <br><br>
    <div id="pagenumber">
    <button id="pre">上一頁</button>
    <label> 第1頁 / 共3頁</label>
    <button id="next">下一頁</button>
    </div>
    <br>

    </div>*@

    @*<script>
    $(function () {
    $.post('', {
    pname: $('.pname').val(),
    pmin: parseInt($('.pmin').val()),
    pmax: parseInt($('.pmax').val()),
    pCategory: $('.pCategory option').filter(':selected').val(),
    groupbuy: $('input:radio:checked').attr("id"),
    soldmin: parseInt($('.soldmin').val()),
    soldmax: parseInt($('.soldmax').val())
    })
    .done(function (data) { })
    })
    </script>*@

</body>

