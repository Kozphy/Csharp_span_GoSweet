@using System.Collections;
@{
    string? currentController = ViewContext.RouteData.Values["controller"]!.ToString();
    string? currentAction = ViewContext.RouteData.Values["action"]!.ToString();

    Layout = "_Layout";

    #region 套用廠商的 Layout, Controller -> controller action
    Dictionary<string, List<string>> BelongFirm = new Dictionary<string, List<string>>()
    {
        { "Talk_datatable", new List<string>(){ "talk_f" } },
        { "Order_datatable", new List<string>(){ "order_f" } },
        { "Firm", new List<string>(){ "Homepage", "Revenue", "ResetPassword" } },
        { "FirmPage", new List<string>(){ "FirmData", "ProductSale", "ProductSearch","Delete", "Edit"} },
    };
    #endregion

    // 確認 controller 是不是公司頁面?
    bool isFirmController = BelongFirm.ContainsKey(currentController!);
    bool isFirmAction = false;


    #region 如果是公司頁面 -> 檢測 Controller 裡的 Method 是不是屬於公司的方法
    if (isFirmController)
    {
         // 偵測 Controller 是不是有這方法
         isFirmAction = BelongFirm[currentController!].Contains(currentAction!);
    }
    #endregion

    //Console.WriteLine("{0}: {1}, {2}: {3}",currentController, isFirmController, currentAction, isFirmAction);

    #region 如果是公司的 Controller，公司的 Action 套用，_LayoutFirm
    if (isFirmController && isFirmAction)
    {
        Layout = "_LayoutFirm";
    }
    #endregion

    //if (BelongFirm.ContainsKey(currentController!))
    //{
    //    Layout = "_LayoutFirm";
    //}

}

